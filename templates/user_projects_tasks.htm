{% extends "base.htm" %}

{% block body %}
<div class="row">
    <div class="col-md-7">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Weekly Report（近 {{days}} 日）</h3>
            </div>
            <div class="panel-body">
                <strong>#Done</strong>
                <ol>
                    {% for task in data|sort(attribute="completed_at") %}
                        {% if task.completed %}
                            <li>{{task.name}} <small><a href="https://app.asana.com/0/{{task.workspace}}/{{task.id}}" target="_blank">[asana]</a></small></li>
                        {% endif %}
                    {% endfor %}
                </ol>
                <br>
                {% if has_working %}
                <strong>#Working</strong>
                <ol>
                    {% for task in data|sort(attribute="name") %}
                        {% if not task.completed and 'working' in task.tags %}
                            <li>{{task.name}} <small><a href="https://app.asana.com/0/{{task.workspace}}/{{task.id}}" target="_blank">[asana]</a></small></li>
                        {% endif %}
                    {% endfor %}
                </ol>
                <br>
                {% endif %}
                <strong>#TODO</strong>
                <ol>
                    {% for task in data|sort(attribute="name") %}
                        {% if not task.completed and 'working' not in task.tags %}
                            <li>{{task.name}} <small><a href="https://app.asana.com/0/{{task.workspace}}/{{task.id}}" target="_blank">[asana]</a></small></li>
                        {% endif %}
                    {% endfor %}
                </ol>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">其他天數選擇</h3>
            </div>
            <div class="panel-body">
                {% for day in [1, 2, 3, 5, 8, 13, 21, 34, 55] %}
                    {% if is_all %}
                        <a class="btn btn-success btn-xs" href="{{url_for('all_tasks', days=day)}}">近 {{day}} 日</a>
                    {% else %}
                        <a class="btn btn-success btn-xs" href="{{url_for('projects_tasks', workspace_id=workspace_id, days=day)}}">近 {{day}} 日</a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">分類說明</h3>
            </div>
            <div class="panel-body">
                <dl>
                    <dt>#Done</dt>
                    <dd>完成的事項。在 Asana 上 assign 自己、且已打勾完成的事項。</dd>
                </dl>
                <dl>
                    <dt>#Working</dt>
                    <dd>正在處理，但尚未完成。在 Asana 上設定 tag 為 <span class="label label-primary">working</span> 就可以歸類在這分類。</dd>
                </dl>
                <dl>
                    <dt>#TODO</dt>
                    <dd>待處理事項。在 Asana 上 assign 自己但尚未完成的事項。</dd>
                </dl>
            </div>
        </div>
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">排序說明</h3>
            </div>
            <div class="panel-body">
                <dl>
                    <dt>#Done</dt>
                    <dd>以完成的時間 <strong>近→遠</strong> 排序。</dd>
                </dl>
                <dl>
                    <dt>#Working</dt>
                    <dd>以標題排序</dd>
                </dl>
                <dl>
                    <dt>#TODO</dt>
                    <dd>以標題排序</dd>
                </dl>
            </div>
        </div>
    </div>
</div>
{% endblock %}
